<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">

  <!-- 검색 결과에 보이는 제목 -->
  <title>애골어 번역기 (Agolian Translator)</title>

  <!-- 검색 결과 설명 -->
  <meta name="description"
        content="애골어는 이아영 학생을 중심으로 만들어진 한국어 기반 반인공 방언 체계입니다. 본 사이트는 애골어의 10초성법 규칙에 따라 한국어를 변환하는 번역기입니다.">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR&display=swap" rel="stylesheet">

<style>
  body, textarea, pre, button {
    font-family: "Noto Serif KR", "Apple SD Gothic Neo",
                 "Malgun Gothic", serif;
  }
</style>

</head>

<body>

  <!-- 대표 제목 -->
  <h1>애골어 번역기 (Agolian Translator)</h1>

  <p>
    이 웹사이트는 한국어 음운 체계를 변형한 반인공 방질"";
  foot_words.sort((a,b) => b.length - a.length);

  // 조사 붙은 경우만 치환
  foot_words.forEach(word => {
    let index = 0;
    while ((index = text.indexOf(word, index)) !== -1) {
      let nextChar = text[index + word.length];
      if (josa.includes(nextChar)) {
        text = text.slice(0, index) + word.replace("발","족") + text.slice(index + word.length);
      }
      index += word.length;
    }
  });

  // 이제 text를 Pyodide로 넘겨서 애골어 변환만 수행
  pyodide.globals.set("text", text);
    
  const code = `
    
JUNG = [
    "ᅡ","ᅢ","ᅣ","ᅤ","ᅥ","ᅦ","ᅧ","ᅨ",
    "ᅩ","ᅪ","ᅫ","ᅬ","ᅭ","ᅮ","ᅯ","ᅰ",
    "ᅱ","ᅲ","ᅳ","ᅴ","ᅵ"
]

JONG = [
    "", "ᆨ","ᆩ","ᆪ","ᆫ","ᆬ","ᆭ","ᆮ","ᆯ","ᆰ",
    "ᆱ","ᆲ","ᆳ","ᆴ","ᆵ","ᆶ","ᆷ","ᆸ","ᆹ",
    "ᆺ","ᆻ","ᆼ","ᆽ","ᆾ","ᆿ","ᇀ","ᇁ","ᇂ"
]

SOFT_H_JAMO = "ᅙ"  # 여린히읗

mapping = {
    14: 12, 13: 12, 15: 0, 1: 0,
    16: 3, 4: 3, 17: 7, 8: 7,
    18: 11, 10: 9
}

SOFT_H = 19  # ㆆ 초성 인덱스

result = []

for ch in text:
    code = ord(ch)

    if 0xAC00 <= code <= 0xD7A3:
        s = code - 0xAC00
        orig_l = s // 588
        v = (s % 588) // 28
        t = s % 28

        # 초성 변환
        l = mapping.get(orig_l, orig_l)

        # 여린히읗 적용
        if useSoftH and orig_l == 18:
            syllable = SOFT_H_JAMO + JUNG[v] + JONG[t]
            result.append(syllable)
            continue

        # ㅖ 예외 규정 적용
        if useYeAlt and v == 7 and orig_l != 11:  # ㅖ → ㅐ
            v = 1

        new_char = chr(0xAC00 + l * 588 + v * 28 + t)
        result.append(new_char)
    else:
        result.append(ch)

"".join(result)
  `;

  const output = pyodide.runPython(code);
  document.getElementById("output").textContent = output;
}
</script>
</body>
</html>

</body>
</html>
