<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">

  <!-- 검색 결과에 보이는 제목 -->
  <title>애골어 번역기 (Agolian Translator)</title>

  <!-- 검색 결과 설명 -->
  <meta name="description"
        content="애골어는 이아영 학생을 중심으로 만들어진 한국어 기반 반인공 방언 체계입니다. 본 사이트는 애골어의 10초성법 규칙에 따라 한국어를 변환하는 번역기입니다.">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR&display=swap" rel="stylesheet">

<style>
  body, textarea, pre, button {
    font-family: "Noto Serif KR", "Apple SD Gothic Neo",
                 "Malgun Gothic", serif;
  }
</style>

</head>

<body>

  <!-- 대표 제목 -->
  <h1>애골어 번역기 (Agolian Translator)</h1>

  <p>
    이 웹사이트는 한국어 음운 체계를 변형한 반인공 방언 <strong>애골어</strong>의
    규칙을 설명하고, 해당 규칙에 따라 한국어를 변환하는 실험적 번역기입니다.
    언어학 이론과 가설 검증을 목적으로 한 프로젝트입니다.
  </p>

  <hr>

  <!-- 번역기 -->
  <h2>번역기</h2>

  <textarea id="input" rows="5" cols="50" placeholder="문장을 입력아세요"></textarea>
  <br><br>
  <button onclick="run()">변완</button>
  <label>
  <input type="checkbox" id="softH">
  여린히읗(ㆆ) 표기 원칙 적용(모바일 미제공)
</label>
  <label>
  <input type="checkbox" id="yeAlt">
  예외규정-1 허용 표기 적용
</label>
<br><br>

  <h3>결과</h3>
  <pre id="output"></pre>

  <hr>

  <!길질"]  
foot_words_sorted = sorted(foot_words, key=len, reverse=True)
for word in foot_words_sorted:
    text = text.replace(word, word.replace("발", "족"))
    
JUNG = [
    "ᅡ","ᅢ","ᅣ","ᅤ","ᅥ","ᅦ","ᅧ","ᅨ",
    "ᅩ","ᅪ","ᅫ","ᅬ","ᅭ","ᅮ","ᅯ","ᅰ",
    "ᅱ","ᅲ","ᅳ","ᅴ","ᅵ"
]

JONG = [
    "", "ᆨ","ᆩ","ᆪ","ᆫ","ᆬ","ᆭ","ᆮ","ᆯ","ᆰ",
    "ᆱ","ᆲ","ᆳ","ᆴ","ᆵ","ᆶ","ᆷ","ᆸ","ᆹ",
    "ᆺ","ᆻ","ᆼ","ᆽ","ᆾ","ᆿ","ᇀ","ᇁ","ᇂ"
]

SOFT_H_JAMO = "ᅙ"  # 여린히읗

mapping = {
    14: 12, 13: 12, 15: 0, 1: 0,
    16: 3, 4: 3, 17: 7, 8: 7,
    18: 11, 10: 9
}

SOFT_H = 19  # ㆆ 초성 인덱스

result = []

for ch in text:
    code = ord(ch)

    if 0xAC00 <= code <= 0xD7A3:
        s = code - 0xAC00
        orig_l = s // 588
        v = (s % 588) // 28
        t = s % 28

        # 초성 변환
        l = mapping.get(orig_l, orig_l)

        # 여린히읗 적용
        if useSoftH and orig_l == 18:
            syllable = SOFT_H_JAMO + JUNG[v] + JONG[t]
            result.append(syllable)
            continue

        # ㅖ 예외 규정 적용
        if useYeAlt and v == 7 and orig_l != 11:  # ㅖ → ㅐ
            v = 1

        new_char = chr(0xAC00 + l * 588 + v * 28 + t)
        result.append(new_char)
    else:
        result.append(ch)

"".join(result)
  `;

  const output = pyodide.runPython(code);
  document.getElementById("output").textContent = output;
}
</script>
</body>
</html>
